/**
 * Wind utility functions for converting wind data to visual representations
 */

// Map full-word compass directions to degrees (0° = North, clockwise)
const DIRECTION_TO_DEGREES = {
  'north': 0,
  'northeast': 45,
  'east': 90,
  'southeast': 135,
  'south': 180,
  'southwest': 225,
  'west': 270,
  'northwest': 315
}

// Region bounds for arrow grids (percentage-based)
// Expanded to cover entire lake area - polygon filtering determines actual arrow placement
const REGION_BOUNDS = {
  'eastern': { minX: 45, maxX: 98, minY: 18, maxY: 72 },
  'easternlakesuperior': { minX: 45, maxX: 98, minY: 18, maxY: 72 },  // Right side of Lake Superior
  'western': { minX: 2, maxX: 55, minY: 18, maxY: 72 },
  'westernlakesuperior': { minX: 2, maxX: 55, minY: 18, maxY: 72 }   // Left side of Lake Superior
}

// Lake Superior outline polygons - traced from actual map image
// Coordinates in SVG viewBox units (0-100), converted from image-map.net pixel coordinates
// Original image dimensions: 1014px × 519px
const LAKE_POLYGONS = {
  'western': [
    { x: 0.10, y: 84.20 }, { x: 1.58, y: 82.08 }, { x: 3.16, y: 78.99 }, { x: 5.33, y: 76.11 },
    { x: 7.89, y: 71.10 }, { x: 10.26, y: 67.24 }, { x: 13.31, y: 62.43 }, { x: 15.88, y: 57.42 },
    { x: 18.44, y: 53.95 }, { x: 20.32, y: 51.64 }, { x: 22.49, y: 50.48 }, { x: 25.34, y: 49.13 },
    { x: 26.92, y: 47.01 }, { x: 28.30, y: 46.24 }, { x: 29.78, y: 45.09 }, { x: 30.77, y: 44.12 },
    { x: 32.25, y: 43.35 }, { x: 32.84, y: 41.62 }, { x: 34.32, y: 39.30 }, { x: 36.49, y: 36.22 },
    { x: 35.30, y: 38.34 }, { x: 37.18, y: 34.49 }, { x: 38.16, y: 31.60 }, { x: 38.56, y: 28.32 },
    { x: 38.66, y: 26.78 }, { x: 38.86, y: 24.66 }, { x: 39.64, y: 23.51 }, { x: 40.83, y: 23.51 },
    { x: 41.22, y: 22.93 }, { x: 42.21, y: 22.35 }, { x: 43.59, y: 23.51 }, { x: 43.49, y: 26.01 },
    { x: 43.59, y: 28.51 }, { x: 44.18, y: 26.01 }, { x: 44.87, y: 24.28 }, { x: 45.46, y: 23.12 },
    { x: 46.25, y: 23.12 }, { x: 46.05, y: 24.66 }, { x: 46.74, y: 21.39 }, { x: 45.76, y: 20.62 },
    { x: 46.45, y: 17.53 }, { x: 47.14, y: 15.61 }, { x: 47.34, y: 13.49 }, { x: 47.73, y: 10.60 },
    { x: 49.01, y: 11.56 }, { x: 50.10, y: 13.68 }, { x: 50.00, y: 15.22 }, { x: 50.10, y: 17.34 },
    { x: 49.70, y: 18.69 }, { x: 48.72, y: 20.23 }, { x: 47.53, y: 23.31 }, { x: 49.01, y: 23.70 },
    { x: 50.59, y: 20.81 }, { x: 51.97, y: 18.88 }, { x: 53.15, y: 17.53 }, { x: 54.54, y: 15.61 },
    { x: 56.51, y: 15.61 }, { x: 57.49, y: 15.61 }, { x: 57.69, y: 12.53 }, { x: 54.63, y: 10.98 },
    { x: 51.97, y: 12.72 }, { x: 50.99, y: 8.29 }, { x: 52.86, y: 5.97 }, { x: 56.31, y: 8.87 },
    { x: 58.38, y: 10.02 }, { x: 59.96, y: 11.56 }, { x: 62.02, y: 13.10 }, { x: 63.21, y: 14.45 },
    { x: 65.96, y: 12.72 }, { x: 67.34, y: 14.84 }, { x: 69.41, y: 13.10 }, { x: 70.50, y: 13.30 },
    { x: 70.70, y: 16.00 }, { x: 72.28, y: 14.26 }, { x: 73.27, y: 16.58 }, { x: 73.96, y: 20.81 },
    { x: 74.75, y: 23.12 }, { x: 75.54, y: 26.59 }, { x: 77.61, y: 35.84 }, { x: 78.70, y: 37.19 },
    { x: 79.78, y: 41.04 }, { x: 81.36, y: 42.97 }, { x: 83.63, y: 43.54 }, { x: 85.89, y: 43.16 },
    { x: 87.57, y: 43.16 }, { x: 89.44, y: 42.58 }, { x: 92.59, y: 42.39 }, { x: 92.00, y: 45.28 },
    { x: 91.80, y: 47.98 }, { x: 91.80, y: 50.48 }, { x: 90.92, y: 53.76 }, { x: 91.11, y: 57.61 },
    { x: 94.86, y: 61.85 }, { x: 95.75, y: 64.54 }, { x: 96.24, y: 66.28 }, { x: 95.25, y: 70.90 },
    { x: 93.77, y: 74.56 }, { x: 93.77, y: 78.60 }, { x: 96.04, y: 78.60 }, { x: 97.22, y: 78.60 },
    { x: 98.81, y: 82.47 }, { x: 96.93, y: 84.20 }, { x: 96.54, y: 87.86 }, { x: 98.02, y: 86.13 },
    { x: 98.02, y: 89.59 }, { x: 96.83, y: 93.63 }, { x: 98.51, y: 94.02 }, { x: 99.99, y: 93.63 },
    { x: 99.70, y: 96.72 }, { x: 98.02, y: 98.26 }, { x: 96.34, y: 97.88 }, { x: 94.96, y: 96.14 },
    { x: 93.48, y: 97.49 }, { x: 91.41, y: 96.14 }, { x: 90.13, y: 94.60 }, { x: 90.13, y: 91.71 },
    { x: 90.33, y: 89.59 }, { x: 91.21, y: 86.51 }, { x: 88.36, y: 87.09 }, { x: 86.19, y: 89.01 },
    { x: 83.53, y: 89.59 }, { x: 79.09, y: 90.36 }, { x: 75.84, y: 92.09 }, { x: 73.56, y: 94.79 },
    { x: 72.08, y: 97.88 }, { x: 70.50, y: 99.99 }, { x: 68.92, y: 97.88 }, { x: 67.84, y: 98.84 },
    { x: 65.57, y: 95.56 }, { x: 63.80, y: 96.72 }, { x: 61.54, y: 96.53 }, { x: 59.56, y: 91.52 },
    { x: 61.54, y: 96.53 }, { x: 58.68, y: 87.09 }, { x: 56.41, y: 83.44 }, { x: 53.65, y: 81.51 },
    { x: 51.38, y: 82.08 }, { x: 47.83, y: 86.70 }, { x: 47.34, y: 79.57 }, { x: 49.60, y: 74.56 },
    { x: 51.68, y: 68.78 }, { x: 53.55, y: 65.70 }, { x: 53.94, y: 63.97 }, { x: 55.82, y: 63.97 },
    { x: 56.81, y: 63.01 }, { x: 55.62, y: 61.66 }, { x: 52.96, y: 60.89 }, { x: 50.49, y: 62.05 },
    { x: 49.01, y: 63.97 }, { x: 47.34, y: 66.28 }, { x: 45.36, y: 69.17 }, { x: 44.18, y: 70.32 },
    { x: 42.51, y: 73.60 }, { x: 41.12, y: 77.25 }, { x: 38.76, y: 78.41 }, { x: 37.08, y: 81.12 },
    { x: 33.73, y: 83.05 }, { x: 30.97, y: 82.86 }, { x: 29.98, y: 84.59 }, { x: 27.71, y: 87.86 },
    { x: 24.66, y: 89.01 }, { x: 22.98, y: 91.33 }, { x: 20.91, y: 89.98 }, { x: 19.53, y: 88.44 },
    { x: 16.18, y: 89.98 }, { x: 17.07, y: 86.13 }, { x: 17.56, y: 83.44 }, { x: 18.74, y: 80.16 },
    { x: 17.36, y: 77.83 }, { x: 15.09, y: 79.18 }, { x: 13.31, y: 80.35 }, { x: 10.55, y: 83.05 },
    { x: 7.69, y: 84.01 }, { x: 5.03, y: 84.59 }, { x: 2.47, y: 85.55 }
  ],
  'westernlakesuperior': [
    { x: 0.10, y: 84.20 }, { x: 1.58, y: 82.08 }, { x: 3.16, y: 78.99 }, { x: 5.33, y: 76.11 },
    { x: 7.89, y: 71.10 }, { x: 10.26, y: 67.24 }, { x: 13.31, y: 62.43 }, { x: 15.88, y: 57.42 },
    { x: 18.44, y: 53.95 }, { x: 20.32, y: 51.64 }, { x: 22.49, y: 50.48 }, { x: 25.34, y: 49.13 },
    { x: 26.92, y: 47.01 }, { x: 28.30, y: 46.24 }, { x: 29.78, y: 45.09 }, { x: 30.77, y: 44.12 },
    { x: 32.25, y: 43.35 }, { x: 32.84, y: 41.62 }, { x: 34.32, y: 39.30 }, { x: 36.49, y: 36.22 },
    { x: 35.30, y: 38.34 }, { x: 37.18, y: 34.49 }, { x: 38.16, y: 31.60 }, { x: 38.56, y: 28.32 },
    { x: 38.66, y: 26.78 }, { x: 38.86, y: 24.66 }, { x: 39.64, y: 23.51 }, { x: 40.83, y: 23.51 },
    { x: 41.22, y: 22.93 }, { x: 42.21, y: 22.35 }, { x: 43.59, y: 23.51 }, { x: 43.49, y: 26.01 },
    { x: 43.59, y: 28.51 }, { x: 44.18, y: 26.01 }, { x: 44.87, y: 24.28 }, { x: 45.46, y: 23.12 },
    { x: 46.25, y: 23.12 }, { x: 46.05, y: 24.66 }, { x: 46.74, y: 21.39 }, { x: 45.76, y: 20.62 },
    { x: 46.45, y: 17.53 }, { x: 47.14, y: 15.61 }, { x: 47.34, y: 13.49 }, { x: 47.73, y: 10.60 },
    { x: 49.01, y: 11.56 }, { x: 50.10, y: 13.68 }, { x: 50.00, y: 15.22 }, { x: 50.10, y: 17.34 },
    { x: 49.70, y: 18.69 }, { x: 48.72, y: 20.23 }, { x: 47.53, y: 23.31 }, { x: 49.01, y: 23.70 },
    { x: 50.59, y: 20.81 }, { x: 51.97, y: 18.88 }, { x: 53.15, y: 17.53 }, { x: 54.54, y: 15.61 },
    { x: 56.51, y: 15.61 }, { x: 57.49, y: 15.61 }, { x: 57.69, y: 12.53 }, { x: 54.63, y: 10.98 },
    { x: 51.97, y: 12.72 }, { x: 50.99, y: 8.29 }, { x: 52.86, y: 5.97 }, { x: 56.31, y: 8.87 },
    { x: 58.38, y: 10.02 }, { x: 59.96, y: 11.56 }, { x: 62.02, y: 13.10 }, { x: 63.21, y: 14.45 },
    { x: 65.96, y: 12.72 }, { x: 67.34, y: 14.84 }, { x: 69.41, y: 13.10 }, { x: 70.50, y: 13.30 },
    { x: 70.70, y: 16.00 }, { x: 72.28, y: 14.26 }, { x: 73.27, y: 16.58 }, { x: 73.96, y: 20.81 },
    { x: 74.75, y: 23.12 }, { x: 75.54, y: 26.59 }, { x: 77.61, y: 35.84 }, { x: 78.70, y: 37.19 },
    { x: 79.78, y: 41.04 }, { x: 81.36, y: 42.97 }, { x: 83.63, y: 43.54 }, { x: 85.89, y: 43.16 },
    { x: 87.57, y: 43.16 }, { x: 89.44, y: 42.58 }, { x: 92.59, y: 42.39 }, { x: 92.00, y: 45.28 },
    { x: 91.80, y: 47.98 }, { x: 91.80, y: 50.48 }, { x: 90.92, y: 53.76 }, { x: 91.11, y: 57.61 },
    { x: 94.86, y: 61.85 }, { x: 95.75, y: 64.54 }, { x: 96.24, y: 66.28 }, { x: 95.25, y: 70.90 },
    { x: 93.77, y: 74.56 }, { x: 93.77, y: 78.60 }, { x: 96.04, y: 78.60 }, { x: 97.22, y: 78.60 },
    { x: 98.81, y: 82.47 }, { x: 96.93, y: 84.20 }, { x: 96.54, y: 87.86 }, { x: 98.02, y: 86.13 },
    { x: 98.02, y: 89.59 }, { x: 96.83, y: 93.63 }, { x: 98.51, y: 94.02 }, { x: 99.99, y: 93.63 },
    { x: 99.70, y: 96.72 }, { x: 98.02, y: 98.26 }, { x: 96.34, y: 97.88 }, { x: 94.96, y: 96.14 },
    { x: 93.48, y: 97.49 }, { x: 91.41, y: 96.14 }, { x: 90.13, y: 94.60 }, { x: 90.13, y: 91.71 },
    { x: 90.33, y: 89.59 }, { x: 91.21, y: 86.51 }, { x: 88.36, y: 87.09 }, { x: 86.19, y: 89.01 },
    { x: 83.53, y: 89.59 }, { x: 79.09, y: 90.36 }, { x: 75.84, y: 92.09 }, { x: 73.56, y: 94.79 },
    { x: 72.08, y: 97.88 }, { x: 70.50, y: 99.99 }, { x: 68.92, y: 97.88 }, { x: 67.84, y: 98.84 },
    { x: 65.57, y: 95.56 }, { x: 63.80, y: 96.72 }, { x: 61.54, y: 96.53 }, { x: 59.56, y: 91.52 },
    { x: 61.54, y: 96.53 }, { x: 58.68, y: 87.09 }, { x: 56.41, y: 83.44 }, { x: 53.65, y: 81.51 },
    { x: 51.38, y: 82.08 }, { x: 47.83, y: 86.70 }, { x: 47.34, y: 79.57 }, { x: 49.60, y: 74.56 },
    { x: 51.68, y: 68.78 }, { x: 53.55, y: 65.70 }, { x: 53.94, y: 63.97 }, { x: 55.82, y: 63.97 },
    { x: 56.81, y: 63.01 }, { x: 55.62, y: 61.66 }, { x: 52.96, y: 60.89 }, { x: 50.49, y: 62.05 },
    { x: 49.01, y: 63.97 }, { x: 47.34, y: 66.28 }, { x: 45.36, y: 69.17 }, { x: 44.18, y: 70.32 },
    { x: 42.51, y: 73.60 }, { x: 41.12, y: 77.25 }, { x: 38.76, y: 78.41 }, { x: 37.08, y: 81.12 },
    { x: 33.73, y: 83.05 }, { x: 30.97, y: 82.86 }, { x: 29.98, y: 84.59 }, { x: 27.71, y: 87.86 },
    { x: 24.66, y: 89.01 }, { x: 22.98, y: 91.33 }, { x: 20.91, y: 89.98 }, { x: 19.53, y: 88.44 },
    { x: 16.18, y: 89.98 }, { x: 17.07, y: 86.13 }, { x: 17.56, y: 83.44 }, { x: 18.74, y: 80.16 },
    { x: 17.36, y: 77.83 }, { x: 15.09, y: 79.18 }, { x: 13.31, y: 80.35 }, { x: 10.55, y: 83.05 },
    { x: 7.69, y: 84.01 }, { x: 5.03, y: 84.59 }, { x: 2.47, y: 85.55 }
  ],
  'eastern': [
    { x: 0.10, y: 84.20 }, { x: 1.58, y: 82.08 }, { x: 3.16, y: 78.99 }, { x: 5.33, y: 76.11 },
    { x: 7.89, y: 71.10 }, { x: 10.26, y: 67.24 }, { x: 13.31, y: 62.43 }, { x: 15.88, y: 57.42 },
    { x: 18.44, y: 53.95 }, { x: 20.32, y: 51.64 }, { x: 22.49, y: 50.48 }, { x: 25.34, y: 49.13 },
    { x: 26.92, y: 47.01 }, { x: 28.30, y: 46.24 }, { x: 29.78, y: 45.09 }, { x: 30.77, y: 44.12 },
    { x: 32.25, y: 43.35 }, { x: 32.84, y: 41.62 }, { x: 34.32, y: 39.30 }, { x: 36.49, y: 36.22 },
    { x: 35.30, y: 38.34 }, { x: 37.18, y: 34.49 }, { x: 38.16, y: 31.60 }, { x: 38.56, y: 28.32 },
    { x: 38.66, y: 26.78 }, { x: 38.86, y: 24.66 }, { x: 39.64, y: 23.51 }, { x: 40.83, y: 23.51 },
    { x: 41.22, y: 22.93 }, { x: 42.21, y: 22.35 }, { x: 43.59, y: 23.51 }, { x: 43.49, y: 26.01 },
    { x: 43.59, y: 28.51 }, { x: 44.18, y: 26.01 }, { x: 44.87, y: 24.28 }, { x: 45.46, y: 23.12 },
    { x: 46.25, y: 23.12 }, { x: 46.05, y: 24.66 }, { x: 46.74, y: 21.39 }, { x: 45.76, y: 20.62 },
    { x: 46.45, y: 17.53 }, { x: 47.14, y: 15.61 }, { x: 47.34, y: 13.49 }, { x: 47.73, y: 10.60 },
    { x: 49.01, y: 11.56 }, { x: 50.10, y: 13.68 }, { x: 50.00, y: 15.22 }, { x: 50.10, y: 17.34 },
    { x: 49.70, y: 18.69 }, { x: 48.72, y: 20.23 }, { x: 47.53, y: 23.31 }, { x: 49.01, y: 23.70 },
    { x: 50.59, y: 20.81 }, { x: 51.97, y: 18.88 }, { x: 53.15, y: 17.53 }, { x: 54.54, y: 15.61 },
    { x: 56.51, y: 15.61 }, { x: 57.49, y: 15.61 }, { x: 57.69, y: 12.53 }, { x: 54.63, y: 10.98 },
    { x: 51.97, y: 12.72 }, { x: 50.99, y: 8.29 }, { x: 52.86, y: 5.97 }, { x: 56.31, y: 8.87 },
    { x: 58.38, y: 10.02 }, { x: 59.96, y: 11.56 }, { x: 62.02, y: 13.10 }, { x: 63.21, y: 14.45 },
    { x: 65.96, y: 12.72 }, { x: 67.34, y: 14.84 }, { x: 69.41, y: 13.10 }, { x: 70.50, y: 13.30 },
    { x: 70.70, y: 16.00 }, { x: 72.28, y: 14.26 }, { x: 73.27, y: 16.58 }, { x: 73.96, y: 20.81 },
    { x: 74.75, y: 23.12 }, { x: 75.54, y: 26.59 }, { x: 77.61, y: 35.84 }, { x: 78.70, y: 37.19 },
    { x: 79.78, y: 41.04 }, { x: 81.36, y: 42.97 }, { x: 83.63, y: 43.54 }, { x: 85.89, y: 43.16 },
    { x: 87.57, y: 43.16 }, { x: 89.44, y: 42.58 }, { x: 92.59, y: 42.39 }, { x: 92.00, y: 45.28 },
    { x: 91.80, y: 47.98 }, { x: 91.80, y: 50.48 }, { x: 90.92, y: 53.76 }, { x: 91.11, y: 57.61 },
    { x: 94.86, y: 61.85 }, { x: 95.75, y: 64.54 }, { x: 96.24, y: 66.28 }, { x: 95.25, y: 70.90 },
    { x: 93.77, y: 74.56 }, { x: 93.77, y: 78.60 }, { x: 96.04, y: 78.60 }, { x: 97.22, y: 78.60 },
    { x: 98.81, y: 82.47 }, { x: 96.93, y: 84.20 }, { x: 96.54, y: 87.86 }, { x: 98.02, y: 86.13 },
    { x: 98.02, y: 89.59 }, { x: 96.83, y: 93.63 }, { x: 98.51, y: 94.02 }, { x: 99.99, y: 93.63 },
    { x: 99.70, y: 96.72 }, { x: 98.02, y: 98.26 }, { x: 96.34, y: 97.88 }, { x: 94.96, y: 96.14 },
    { x: 93.48, y: 97.49 }, { x: 91.41, y: 96.14 }, { x: 90.13, y: 94.60 }, { x: 90.13, y: 91.71 },
    { x: 90.33, y: 89.59 }, { x: 91.21, y: 86.51 }, { x: 88.36, y: 87.09 }, { x: 86.19, y: 89.01 },
    { x: 83.53, y: 89.59 }, { x: 79.09, y: 90.36 }, { x: 75.84, y: 92.09 }, { x: 73.56, y: 94.79 },
    { x: 72.08, y: 97.88 }, { x: 70.50, y: 99.99 }, { x: 68.92, y: 97.88 }, { x: 67.84, y: 98.84 },
    { x: 65.57, y: 95.56 }, { x: 63.80, y: 96.72 }, { x: 61.54, y: 96.53 }, { x: 59.56, y: 91.52 },
    { x: 61.54, y: 96.53 }, { x: 58.68, y: 87.09 }, { x: 56.41, y: 83.44 }, { x: 53.65, y: 81.51 },
    { x: 51.38, y: 82.08 }, { x: 47.83, y: 86.70 }, { x: 47.34, y: 79.57 }, { x: 49.60, y: 74.56 },
    { x: 51.68, y: 68.78 }, { x: 53.55, y: 65.70 }, { x: 53.94, y: 63.97 }, { x: 55.82, y: 63.97 },
    { x: 56.81, y: 63.01 }, { x: 55.62, y: 61.66 }, { x: 52.96, y: 60.89 }, { x: 50.49, y: 62.05 },
    { x: 49.01, y: 63.97 }, { x: 47.34, y: 66.28 }, { x: 45.36, y: 69.17 }, { x: 44.18, y: 70.32 },
    { x: 42.51, y: 73.60 }, { x: 41.12, y: 77.25 }, { x: 38.76, y: 78.41 }, { x: 37.08, y: 81.12 },
    { x: 33.73, y: 83.05 }, { x: 30.97, y: 82.86 }, { x: 29.98, y: 84.59 }, { x: 27.71, y: 87.86 },
    { x: 24.66, y: 89.01 }, { x: 22.98, y: 91.33 }, { x: 20.91, y: 89.98 }, { x: 19.53, y: 88.44 },
    { x: 16.18, y: 89.98 }, { x: 17.07, y: 86.13 }, { x: 17.56, y: 83.44 }, { x: 18.74, y: 80.16 },
    { x: 17.36, y: 77.83 }, { x: 15.09, y: 79.18 }, { x: 13.31, y: 80.35 }, { x: 10.55, y: 83.05 },
    { x: 7.69, y: 84.01 }, { x: 5.03, y: 84.59 }, { x: 2.47, y: 85.55 }
  ],
  'easternlakesuperior': [
    { x: 0.10, y: 84.20 }, { x: 1.58, y: 82.08 }, { x: 3.16, y: 78.99 }, { x: 5.33, y: 76.11 },
    { x: 7.89, y: 71.10 }, { x: 10.26, y: 67.24 }, { x: 13.31, y: 62.43 }, { x: 15.88, y: 57.42 },
    { x: 18.44, y: 53.95 }, { x: 20.32, y: 51.64 }, { x: 22.49, y: 50.48 }, { x: 25.34, y: 49.13 },
    { x: 26.92, y: 47.01 }, { x: 28.30, y: 46.24 }, { x: 29.78, y: 45.09 }, { x: 30.77, y: 44.12 },
    { x: 32.25, y: 43.35 }, { x: 32.84, y: 41.62 }, { x: 34.32, y: 39.30 }, { x: 36.49, y: 36.22 },
    { x: 35.30, y: 38.34 }, { x: 37.18, y: 34.49 }, { x: 38.16, y: 31.60 }, { x: 38.56, y: 28.32 },
    { x: 38.66, y: 26.78 }, { x: 38.86, y: 24.66 }, { x: 39.64, y: 23.51 }, { x: 40.83, y: 23.51 },
    { x: 41.22, y: 22.93 }, { x: 42.21, y: 22.35 }, { x: 43.59, y: 23.51 }, { x: 43.49, y: 26.01 },
    { x: 43.59, y: 28.51 }, { x: 44.18, y: 26.01 }, { x: 44.87, y: 24.28 }, { x: 45.46, y: 23.12 },
    { x: 46.25, y: 23.12 }, { x: 46.05, y: 24.66 }, { x: 46.74, y: 21.39 }, { x: 45.76, y: 20.62 },
    { x: 46.45, y: 17.53 }, { x: 47.14, y: 15.61 }, { x: 47.34, y: 13.49 }, { x: 47.73, y: 10.60 },
    { x: 49.01, y: 11.56 }, { x: 50.10, y: 13.68 }, { x: 50.00, y: 15.22 }, { x: 50.10, y: 17.34 },
    { x: 49.70, y: 18.69 }, { x: 48.72, y: 20.23 }, { x: 47.53, y: 23.31 }, { x: 49.01, y: 23.70 },
    { x: 50.59, y: 20.81 }, { x: 51.97, y: 18.88 }, { x: 53.15, y: 17.53 }, { x: 54.54, y: 15.61 },
    { x: 56.51, y: 15.61 }, { x: 57.49, y: 15.61 }, { x: 57.69, y: 12.53 }, { x: 54.63, y: 10.98 },
    { x: 51.97, y: 12.72 }, { x: 50.99, y: 8.29 }, { x: 52.86, y: 5.97 }, { x: 56.31, y: 8.87 },
    { x: 58.38, y: 10.02 }, { x: 59.96, y: 11.56 }, { x: 62.02, y: 13.10 }, { x: 63.21, y: 14.45 },
    { x: 65.96, y: 12.72 }, { x: 67.34, y: 14.84 }, { x: 69.41, y: 13.10 }, { x: 70.50, y: 13.30 },
    { x: 70.70, y: 16.00 }, { x: 72.28, y: 14.26 }, { x: 73.27, y: 16.58 }, { x: 73.96, y: 20.81 },
    { x: 74.75, y: 23.12 }, { x: 75.54, y: 26.59 }, { x: 77.61, y: 35.84 }, { x: 78.70, y: 37.19 },
    { x: 79.78, y: 41.04 }, { x: 81.36, y: 42.97 }, { x: 83.63, y: 43.54 }, { x: 85.89, y: 43.16 },
    { x: 87.57, y: 43.16 }, { x: 89.44, y: 42.58 }, { x: 92.59, y: 42.39 }, { x: 92.00, y: 45.28 },
    { x: 91.80, y: 47.98 }, { x: 91.80, y: 50.48 }, { x: 90.92, y: 53.76 }, { x: 91.11, y: 57.61 },
    { x: 94.86, y: 61.85 }, { x: 95.75, y: 64.54 }, { x: 96.24, y: 66.28 }, { x: 95.25, y: 70.90 },
    { x: 93.77, y: 74.56 }, { x: 93.77, y: 78.60 }, { x: 96.04, y: 78.60 }, { x: 97.22, y: 78.60 },
    { x: 98.81, y: 82.47 }, { x: 96.93, y: 84.20 }, { x: 96.54, y: 87.86 }, { x: 98.02, y: 86.13 },
    { x: 98.02, y: 89.59 }, { x: 96.83, y: 93.63 }, { x: 98.51, y: 94.02 }, { x: 99.99, y: 93.63 },
    { x: 99.70, y: 96.72 }, { x: 98.02, y: 98.26 }, { x: 96.34, y: 97.88 }, { x: 94.96, y: 96.14 },
    { x: 93.48, y: 97.49 }, { x: 91.41, y: 96.14 }, { x: 90.13, y: 94.60 }, { x: 90.13, y: 91.71 },
    { x: 90.33, y: 89.59 }, { x: 91.21, y: 86.51 }, { x: 88.36, y: 87.09 }, { x: 86.19, y: 89.01 },
    { x: 83.53, y: 89.59 }, { x: 79.09, y: 90.36 }, { x: 75.84, y: 92.09 }, { x: 73.56, y: 94.79 },
    { x: 72.08, y: 97.88 }, { x: 70.50, y: 99.99 }, { x: 68.92, y: 97.88 }, { x: 67.84, y: 98.84 },
    { x: 65.57, y: 95.56 }, { x: 63.80, y: 96.72 }, { x: 61.54, y: 96.53 }, { x: 59.56, y: 91.52 },
    { x: 61.54, y: 96.53 }, { x: 58.68, y: 87.09 }, { x: 56.41, y: 83.44 }, { x: 53.65, y: 81.51 },
    { x: 51.38, y: 82.08 }, { x: 47.83, y: 86.70 }, { x: 47.34, y: 79.57 }, { x: 49.60, y: 74.56 },
    { x: 51.68, y: 68.78 }, { x: 53.55, y: 65.70 }, { x: 53.94, y: 63.97 }, { x: 55.82, y: 63.97 },
    { x: 56.81, y: 63.01 }, { x: 55.62, y: 61.66 }, { x: 52.96, y: 60.89 }, { x: 50.49, y: 62.05 },
    { x: 49.01, y: 63.97 }, { x: 47.34, y: 66.28 }, { x: 45.36, y: 69.17 }, { x: 44.18, y: 70.32 },
    { x: 42.51, y: 73.60 }, { x: 41.12, y: 77.25 }, { x: 38.76, y: 78.41 }, { x: 37.08, y: 81.12 },
    { x: 33.73, y: 83.05 }, { x: 30.97, y: 82.86 }, { x: 29.98, y: 84.59 }, { x: 27.71, y: 87.86 },
    { x: 24.66, y: 89.01 }, { x: 22.98, y: 91.33 }, { x: 20.91, y: 89.98 }, { x: 19.53, y: 88.44 },
    { x: 16.18, y: 89.98 }, { x: 17.07, y: 86.13 }, { x: 17.56, y: 83.44 }, { x: 18.74, y: 80.16 },
    { x: 17.36, y: 77.83 }, { x: 15.09, y: 79.18 }, { x: 13.31, y: 80.35 }, { x: 10.55, y: 83.05 },
    { x: 7.69, y: 84.01 }, { x: 5.03, y: 84.59 }, { x: 2.47, y: 85.55 }
  ]
}

/**
 * Convert wind direction string to degrees
 * @param {string} direction - Wind direction as full word (e.g., "north", "northeast")
 * @returns {number} Degrees (0-360), 0 = North
 */
export function directionToDegrees(direction) {
  if (!direction) return 0

  // Normalize: lowercase, trim
  const normalized = direction.toLowerCase().trim()

  return DIRECTION_TO_DEGREES[normalized] ?? 0
}

/**
 * Calculate number of arrows based on wind speed
 * Stronger winds = fewer arrows
 * @param {number|string} windSpeed - Wind speed in knots
 * @returns {number} Arrow count (10-40)
 */
export function getArrowCount(windSpeed) {
  const speed = parseFloat(windSpeed) || 0

  if (speed >= 30) return 10  // Gale force - 10 large arrows
  if (speed >= 20) return 15  // Strong winds - 15 arrows
  if (speed >= 10) return 25  // Moderate winds - 25 arrows
  return 40                    // Light winds - 40 small arrows
}

/**
 * Calculate individual arrow size based on wind speed
 * Stronger winds = larger arrows
 * @param {number|string} windSpeed - Wind speed in knots
 * @returns {number} Arrow size in SVG viewBox units
 */
export function getArrowSize(windSpeed) {
  const speed = parseFloat(windSpeed) || 0

  // 3x larger than before
  if (speed >= 30) return 10.5  // Large for gale force
  if (speed >= 20) return 7.5   // Medium for strong winds
  if (speed >= 10) return 6.0   // Small for moderate winds
  return 4.5                     // Smaller for light winds
}

/**
 * Get arrow color based on wind intensity
 * @param {number|string} windSpeed - Wind speed in knots
 * @returns {string} Hex color code
 */
export function getArrowColor(windSpeed) {
  const speed = parseFloat(windSpeed) || 0

  if (speed >= 30) return '#ef4444'  // Red - gale force
  if (speed >= 20) return '#f97316'  // Orange - strong winds
  if (speed >= 10) return '#fbbf24'  // Yellow - moderate winds
  return '#4ade80'                    // Green - light winds
}

/**
 * Get bounds for a region (area to fill with arrows)
 * @param {string} region - Region name (e.g., "eastern", "western")
 * @returns {{minX: number, maxX: number, minY: number, maxY: number}} Bounds in SVG viewBox percentage coordinates
 */
export function getRegionBounds(region) {
  if (!region) return { minX: 40, maxX: 60, minY: 40, maxY: 60 }

  // Normalize region name (lowercase, remove underscores/spaces)
  const normalized = region.toLowerCase().replace(/[_\s]/g, '')

  return REGION_BOUNDS[normalized] || { minX: 40, maxX: 60, minY: 40, maxY: 60 }
}

/**
 * Calculate grid spacing for arrows
 * @param {number|string} windSpeed - Wind speed in knots
 * @returns {number} Grid spacing in SVG viewBox units
 */
export function getGridSpacing(windSpeed) {
  const speed = parseFloat(windSpeed) || 0

  // Much smaller spacing to fill the entire lake with arrows
  // Stronger winds = slightly denser grid
  if (speed >= 30) return 3   // Gale force - very dense grid
  if (speed >= 20) return 4   // Strong winds - dense grid
  if (speed >= 10) return 5   // Moderate winds
  return 6                     // Light winds - still dense
}

/**
 * Check if a point is inside a polygon using ray casting algorithm
 * @param {number} x - X coordinate of point
 * @param {number} y - Y coordinate of point
 * @param {Array<{x: number, y: number}>} polygon - Array of polygon vertices
 * @returns {boolean} True if point is inside polygon
 */
export function isPointInPolygon(x, y, polygon) {
  let inside = false

  for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {
    const xi = polygon[i].x
    const yi = polygon[i].y
    const xj = polygon[j].x
    const yj = polygon[j].y

    const intersect = ((yi > y) !== (yj > y)) &&
      (x < (xj - xi) * (y - yi) / (yj - yi) + xi)

    if (intersect) inside = !inside
  }

  return inside
}

/**
 * Get lake polygon for a region
 * @param {string} region - Region name (e.g., "eastern", "western")
 * @returns {Array<{x: number, y: number}>} Polygon vertices
 */
export function getLakePolygon(region) {
  if (!region) return []

  // Normalize region name (lowercase, remove underscores/spaces)
  const normalized = region.toLowerCase().replace(/[_\s]/g, '')

  return LAKE_POLYGONS[normalized] || []
}
